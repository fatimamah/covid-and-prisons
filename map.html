<html>
<meta charset="UTF-8">
<title>INFO 3300: Project 2 Map</title>
<script src="https://d3js.org/d3.v6.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script>
<style>
    .outline {
        stroke: black;
        stroke-width: 1px;
        fill: none;
    }

    /* .graticule {
        fill: none;
        stroke: grey;
        stroke-width: 1px;
    } */

    .state {
        fill: lightgrey;
    }
</style>

<body>

    <svg id="usmap" height="600" width="900"></svg>
    <input type="range" id="slider" value="March 2020" name="slider" min="March 2020" max="Decmeber 2020" step="1">
    </input>
    </div>


    <script>

        const svg = d3.select("#usmap");
        const width = svg.attr("width");
        const height = svg.attr("height");
        const margin = { top: 20, right: 20, bottom: 20, left: 20 };
        const mapWidth = width - margin.left - margin.right;
        const mapHeight = height - margin.top - margin.bottom;
        const map = svg.append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        const requestData = async function () {
            const us = await d3.json("us1.json");

            var states = topojson.feature(us, us.objects.states);
            var statesMesh = topojson.mesh(us, us.objects.states);

            // console.log(us)
            // console.log(states)

            var projection = d3.geoAlbersUsa().fitSize([mapWidth, mapHeight], states);
            var path = d3.geoPath().projection(projection);

            var graticule = d3.geoGraticule10();

            map.selectAll("path.state").data(states.features)
                .join("path")
                .attr("class", "state")
                .attr("note", d => d.id)
                .attr("d", path);

            map.append("path").datum(statesMesh)
                .attr("class", "outline")
                .attr("d", path);
        }
        requestData();
    </script>
</body>

</html>